\documentclass[letterpaper,numbers=enddot]{scrartcl}

\usepackage{amsmath}
\usepackage{amssymb}

\title{Isomorphisms between algebraic datatypes}
\author{Andrew Polonsky, Ben Lenox}

\newcommand{\cat}{\mathbb{C}}
\newcommand{\op}{{op}}

\newcommand{\bone}{\boldsymbol{1}}
\newcommand{\then}{\quad\mathrel{\Longrightarrow}\quad}

\newcommand{\ints}{\mathbb{Z}}
\newcommand{\nat}{\mathbb{N}}

\begin{document}

\section*{2025.07.22}
\begin{itemize}
  \item Theorem giving sufficient condition for surjectivity of the fold
  (from the initial algebra of a functor to any other fixed point of it)
  in terms of the image of its composite with the map to the final coalgebra.

\end{itemize}

\section*{2025.05.22}
\subsection*{Misc.\ notes}
\begin{itemize}
  \item Iterating linear functors does not change the roots
  \item To compute the roots of $H(H(X))$, should solve $H(x) = r_i$, where $r_i$ are the roots of $H(x)$.
\end{itemize}

\subsection*{Questions}
\begin{enumerate}
  \item Are colimits of the diagram induced by an arbitrary polynomial functor $P$ and $P \circ P$ the same?

  (Obviously, Yes.)

  \item Can that be generalized to arbitrary unfoldings?

  Can that be generalized to ``$1.5$-unfoldings'' ?

  \item When we ``add a non-zero root'', do we automatically get a
  rig isomorphism inducing an isomorphism to the original $\mu$-type?

  \item Prove the surjectivity criterion relating the image of the fold
  from the initial algebra to the final coalgebra?

  \item Big goal: When an F-algebra structure is given by a rig iso,
  the induced fold is epi (and thus iso).

  \item What are the most generic iso rules for the mu-constructor?

  \item Can every ADT $T(\vec x)$ (with any nesting of $\mu$s) be realized
  ``with all $\mu$s on the outside''?

  Strong version:  $T(\vec x) = \mu \vec y. P(\vec x, \vec y)$, where $P(\vec x, \vec y)$ is a polynomial.

  Weak version:  $T(\vec x) = U(\vec x, \mu \vec y. P(\vec x, \vec y))$, where $U(\vec x)$,
  $P(\vec x, \vec y)$ are polynomials.

  Weaker version: Same, but allowing simultaneous solution to a system of equations
  (I.E., working with fixed points of functors on $Set^n$.)

  \item Prove that $\mu x. \mu y. P(x,y) = \mu x. P(x,x)$?

  (Almost certainly yes.)

  It would immediately follow that e.g.,
  $\mu \vec x. P(\vec x) = \mu x. P(x,\dots,x) = \mu \vec x. P(\vec{\pi x})$,
  where $\vec{\pi x}$ is any permutation/mere function
  of $\vec x$.

  \item Look at $\nat \times \nat$.

  \item Look at equational laws between rig isos/elements of the iso type.

  \item
\end{enumerate}

\maketitle

\section{Standard ADTs}
\begin{itemize}
  \item $s(X) = 1 + 2X$, $S = \mu X. s(x)$
  \item $t(X) = 1 + X^2$, $T = \mu X. t(x)$
  \item $m(X) = 1 + X + X^2$, $M = \mu X. m(x)$
  \item $j(X) = 1 + 2X + X^2$, $J = \mu X. j(x)$
  \item $h(X) = 1 + X + X^3$, $H = \mu X. h(x)$
  \item $q(X) = 1 + X^2 + X^4$, $Q = \mu X. q(x)$
\end{itemize}

\section{Research problems}
\subsection{Relating different ``roots'' of a single ADT}

Enumerate/define the polynomials that leave the given ADT unchanged

Examples:
\begin{enumerate}
  \item $T = T^5$
  \item $M = M^3$
  \item $J = J^2$
\end{enumerate}

\subsection{Relating different ADTs in terms of their roots}
\begin{enumerate}
  \item $T^3 = M^2$
  \item $T^3$ vs.\ $M^2$ vs.\ $S$?
  \item
\end{enumerate}

\subsection{A type theory defining equality without triple equality}

\section{Definitions}

\begin{itemize}
  \item Let $\nat[x]$ be the set of all polynomials in variable $x$ with coefficients in $\nat$
  \item This is the free rig over ${x}$
  \item Consider the left action of $\nat[x]$ on itself: $\_\cdot\_ : \nat[x] \times \nat[x] \to \nat[x]$ and $(p(x) , q(x)) \mapsto p(x) \cdot q(x)$
  \item If we now consider the quotient $\nat[x] / ((1) x=2x+1 , (2) x+x^2=1+x)$, we find that the induced action satisfies \[(x\cdot) \circ (x\cdot) = id\]
  \item With (2), every $p(x)$ is equivalent to $a+bx$
  \item With (1), every $a+b\cdot x$ is equivalent to one of: \[\begin{cases}
    a & a \ge 0 \\
    a + x & a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     \ge 0 \\
    bx & b \ge 1
  \end{cases}\]
\end{itemize}

\section{2024.08.23}

\begin{itemize}
  \item Can we define LFP in a way that is positive?
\end{itemize}

\section{2024.07.10}

Notes on ``Objects of categories as complex numbers''.

\subsection{Prop.2}

Can Proposition 2 be generalized as follows.

Let $p(x) = p_1(x)- p_2(x)$, $q(x) = q_1(x)-q_2(x)$ be elements of $\ints[x]$.

If the content of $p$ divides the content of $q$, and
the roots of $p$ are a submultiset of the roots of $q$, then
\[ \forall x. p(x)=0 \then q(x) = 0 \]

\newpage

\section*{TODO}

\begin{enumerate}
  \item Actually prove that
  \[ X=(X+1)^2 \then X \simeq X^2 \]
\end{enumerate}

\newpage
\section{Questions to be investigated}

\begin{enumerate}
  \item What is a strong isomorphism between ADTs?
  \item What does it mean for a functor to be a factor of another functor?
  \item A conception of a negative set in these terms.
  \begin{itemize}
    \item Universal $U$, and an ``integer set'' is a function from $U$ to $\mathbb{Z}$.
    \item A contravariant functor $- : \cat \to \cat^\op$ that splits the identity
    ($- \circ -^\op = id$)
    \item A solution to $E(X)=X$, obtained by taking $X = Y + 1$ for some type $Y$.
  \end{itemize}
  \item All polynomials functors with degree at least two will have linear factors.
  Can it solve arbitrary linear equation?
  Are all linear datatypes isomorphic to each other?  Are they generated by $S = -1$?
  \item Retractions between datatypes!
  \item Isomorphisms induced by initial algebra maps.
  \item Let $H(X) = 1 + X + X^3$, then $X$ contains sixth roots of unity as well as
  a square root of unity.  $M(X) = 1 + X + X^2$ contains fourth roots of unity;
  does this explain why we can ``divide $H(X)$ by $M(X)$''?

  Is this the reason why a solution to $M(X)=X$, when squared, yields a solution to $H(X)$?
  Why does this happen more generally?
  \item Can any equation $X=P(X)$, with $P(X)$ be an \emph{arbitrary}
  polynomial --- containing both positive and negative coefficients ---
  be solved by substitution $X = (Y+k)$, for some $k \ge 0$.

  Can various solutions be compared?

  \item Generalize all of the above to \emph{systems of equations} of the form
  \begin{align*}
    P_1(X_1,\dots,X_k) &= Q_1(X_1,\dots,X_k)\\
    P_2(X_1,\dots,X_k) &= Q_2(X_1,\dots,X_k)\\
     &\quad \vdots \\
    P_k(X_1,\dots,X_k) &= Q_k(X_1,\dots,X_k)
  \end{align*}
\end{enumerate}

\section{To do:}
\begin{enumerate}
  \item Define an ADT.
  \item Define R(A?)DT: \emph{Rational (Algebraic?) Datatypes}
  \item Is every RADT an ADT?
\end{enumerate}

\section{Discussion}
Let $F$ be a functor, $X$ be the initial $F$-algebra.

By Lambek's Theorem, $F(X) \simeq X$.

For any polynomial $P(X)$ in $X$, we get $P(F(X)) \simeq P(X)$.

Relate this to the notion of strong isomorphism.

\section{2023.08.10}

\subsection*{Functors}
Let $H(X) = 1 + X + X^3$.

Let $N$ be the initial algebra of $H$, so that $N \simeq H(N)$.

Let $B(X) = 1 + 2X$.

Let $S$ be the initial algebra of $B$, so that $S \simeq B(S)$.

Is $B$ a ``factor'' of $H$?

To compare the them, try to put an $B$-algebra on... $N$? Doesn't work.

But on $N^3$ works!

\section{2023.08.16}

\subsection{Main conjecture}


\subsection{Conjecture}

The algebraic datatype $X = P(X)$ includes infinite trees only if it does NOT contain
a positive integer root.

\textbf{Example.}
$F(X) = X^2-4X+1$.  To have $F(X)=X$, we expect the roots to be $X = 4$ and $X = 1$.

Applying the substitution $X = Y+1$, we get
\begin{align*}
  Y+1
  &= Y^2 + 2Y + 1 - 4Y-4 + 4\\
  Y &= Y^2-2Y
\end{align*}

The initial algebra for $Y \mapsto Y^2-2Y$ is $Y=\emptyset$,
which suggests the initial algebra for $F(X)$ is also $X = \bone$.

Setting instead $X = Z + 4$, we get
\[ Z+4 = \cdots = Z^2 + 4Z \]

Generally, whenever we set $X = Y + k$,
where $k$ is a root of the polynomial $F(X)$, then this will cancel out the constants,
leaving out a functor whose initial algebra is the empty set.

\subsection{Observation about $B(X) = 2X+1$}

\begin{align*}
  X &= 2X + 1\\
  X - 1 &= 2X\\
  X &= Y+1\\
  Y+1-1 &= 2Y + 2\\
  Y &= 2Y + 2
\end{align*}

\subsection{Key Question}

What is the notion of a \emph{least} fixed point/\emph{initial} algebra for
a (system of) equation(s) in which \emph{both sides} are polynomials.

(This is equivalent to admitting negative coefficients.)

\subsection{Another example}
\begin{align*}
  X &= X^2 - 4X + 4\\
  X &= 5 + P\\
  5+P &= \cdots \\
  P &= P^2 + 6P + 4
\end{align*}

\subsection{Open questions}

\begin{enumerate}
  \item The following rule is obviously sound:
  \[ X+1 = Y+1 \then X=Y \]
  How constructive is this principle?
  Do we need to decide equality on both $X$ and $Y$ to exhibit the
  isomorphism on the right in terms of the one on the left?

  \textbf{Answer.}
  Always solvable.  Given $i : X+1 \to Y+1$, define $i^! :X \to Y$ as follows.
  Given $x$, consider $X \mapsto X+1 \mapsto Y+1$, can check whether the output is in $1$, and if so,
  apply $i$ to $()$.  Same in the other direction.

  \item What does it mean for an isomorphism from $X$ to $P(X)$, where $P(X)$
  is a polynomial, to describe an ADT, when $P(X)$ has a specific root,
  e.g., $i$, $-i$, $1$, $-1$, $0$, $2$, $-\pi^2$, $\frac{1}{2}$, $\sqrt(2)$, etc.

  What properties does possession of a particular root imply for a given ADT?

  \item Generalize all of the above to having arbitrary ADTs as coefficients
  in the polynomial (defining the functor).

\end{enumerate}

\section{2023.09.07}
\begin{enumerate}
  \item If $X = P(X) + X$, then $X = n \cdot P(X) + X$ for all $n \in \mathbb{Z}$.

  \textsc{Proof.} Induction for non-negative $n$, symmetry for all $n$.

  \item If $X = P(X) + X$, then $X = X \cdot P(X) + X$.

  \item If $X = P(X) + X$, then $X = (X+n)\cdot P(X) + X$ for all $n \in \mathbb{Z}$.

  \textsc{Proof.} Distribute, and use the previous two facts.
\end{enumerate}

Everything reduces to the second case, so we analyze that.
\begin{itemize}
  \item If $P(x)=0$, it's trivially true.
  \item If $P(x) = k$, then $X = X + k$, $X \cdot P(X) + X = X (1 + k)$
\end{itemize}

\section{2025.03.13}

In many cases, some $\mu$ datatype, $\mu F$ being a fixed point of a functor $G$ will not result in a fold isomorphism. \\
\textbf{Conjecture: } For all of these situations resulting from a rig isomorphism, all elements of $\mu F$ not in the range of the fold will have an image in the final coalgebra of $G$ which is rational.

We want to try to prove surjectivity of the fold by proving that all preimages of elements of $\mu F$ are well-founded.

\end{document}
