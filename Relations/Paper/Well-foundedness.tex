\section{Well-foundedness}

\newcommand{\then}{\Longrightarrow}
\label{sec:Well-foundedness}

% \newcommand{\accCor}{\textbf{accCor}}
% \newcommand{\accDNE}{\textbf{accDNE}}

% We use Well-founded not Wellfounded

An abstract reduction $\to_R$ is strongly normalizing
if and only if the converse relation is well-founded.
In this section, we will compare several definitions of well-foundedness.
%which depend on the basic notions given in Definition~\ref{def:WFnotions} below. 

\subsection{Definitions of well-foundedness}

For the rest of this section, fix $R \subseteq A \times A$.  We write $Rxy$ for $(x,y) \in R$.

In the context of ARS, the reader should think of the converse relation, 
interpreting $Rxy$ as denoting a reduction step $y \to_R x$.

For $P \subseteq A$, let $\ol{P} = \{ x \in A \mid x \notin P\}$ denote the complement of $P$.
\begin{definition}\label{def:WFnotions} \hfill 
   \begin{enumerate}
    \item $x \in A$ is \emph{accessible} if for all $y \in A$, $Ryx$ implies $y$ is accessible. 
      This is an inductive definition, with the base case obtained at 
     those $x$ satisfying $\lnot Ryx$ for all $y$.
    \item $P \subseteq A$ is \emph{inductive}
    if, for each $x \in A$, $(\forall y. Ryx \to y \in P)$ implies $x \in P$.


    \item $x \in A$ is \emph{$P$-minimal} if $x \in P$ and for all $y$,
    $Ryx$ implies $y \notin P$.

    \item $P \subseteq A$ is \emph{coreductive} if, for each $x \in \ol{P}$, there is a $y \in A$ such that $Ryx$ and $y \in \ol{P}$. 
    
    % \item $s : \nat \to A$ is \emph{$R$-decreasing} if for all $k$, $(s(k+1),s(k)) \in R$. 
  \end{enumerate}
\end{definition}

The above notions give rise to several distinct definitions of well-foundedness, given below. 
Recall the definition of an $R$-decreasing sequence from Section~\ref{sec:Definitions}:
this is a function $s : \nat \to A$ satisfying $(s(k+1),s(k)) \in R$ for all $k \in \nat$.

\begin{definition} \label{def:WFproperties} \hfill 
  \begin{enumerate}
    \item $R$ is \emph{accessibly well-founded} ($\WFacc$) if every element is accessible:
      \[
        \forall x \in A.\; x \text{ is accessible}
      \]
    \item \label{def:WFind} $R$ is \emph{inductively well-founded} ($\WFind$) if every inductive predicate is universally true:
      \[
        \forall P \subseteq A.\;\text{$P$ is inductive} \Rightarrow \forall x \in A.\; x \in P
      \]
    \item $R$ is \emph{coreductively well-founded} ($\WFcor$) if every coreductive predicate is universally true:
      \[
        \forall P \subseteq A.\;\text{$P$ is coreductive} \Rightarrow \forall x \in A.\; x \in P
      \]
    \item  $R$ is \emph{well-founded minimality-wise} ($\WFmin$) if every nonempty subset contains a minimal element:
      \[
        \forall P \subseteq A.\; P \neq \varnothing \Rightarrow
        \exists x \in A.\; \text{$x$ is $P$-minimal}
      \]
    \item  $R$ is \emph{well-founded minimality-wise for $\lnot \lnot$-closed predicates} ($\WFminDNE$) if every nonempty $\lnot \lnot$-closed subset contains a minimal element:
      \[
        \forall P \subseteq A.\; P \neq \varnothing \Rightarrow \ol{\ol P} \subseteq P \Rightarrow
        \exists x \in A.\; \text{$x$ is $P$-minimal}
      \]
   \item $R$ is \emph{sequentially well-founded} ($\WFseq$) if every sequence contains an index at which it is not decreasing:
      \[
        \forall s : \nat \to A\ \exists k : \nat.\, \lnot \, R \,(s\,(k+1))\,(s\,k)
      \]
  \end{enumerate}
\end{definition}
We have formalized the above definitions of well-foundedness in \texttt{WFDefinitions.agda}. 

Classically, the above notions of well-foundedness are all equivalent.  Constructively, only the first two are equivalent; the remaining definitions are not. Moreover, even individual classical definitions can be given constructive
interpretations in varying degrees of logical strength.

For example, the implication from ``every non-empty subset has a minimal element'' to
``every element is accessible''  is a classical proof by contradiction.
(Assuming that there exists an inaccessible element, the hypothesis implies that
there must be a minimal such element, which immediately yields a contradiction:
every minimal element is accessible.)

Constructively, this argument only goes so far as to show that, if every non-empty
subset has a minimal element, then no element is inaccessible.
That is, the universal statement being proved is that every $x \in A$
is not-not-accessible. The final step needed to infer that $x$ is indeed accessible
is not constructively provable in general, therefore it needs to be assumed as
an additional hypothesis in order to recover the full implication.

On the other hand, assuming accessibility is $\lnot\lnot$-closed, the other
hypothesis can now be weakened, to only require existence of minimal elements
for $\lnot\lnot$-closed subsets.  This is a significant restriction, which may
be validated in certain cases.  In contrast, the original hypothesis
(postulating minimal elements for ALL predicates)
is generally equivalent to every subset being decidable.
Indeed, the file \texttt{WFCounters.agda} shows that assuming the full minimality hypothesis
for the standard strict order on the natural numbers entails decidability
of every subset of $\nat$ --- which is clearly incompatible with effective semantics.
The restriction to $\lnot\lnot$-closed subsets implies (and is equivalent to) 
every subset $P$ being merely \emph{weakly} decidable (satisfying $\lnot \lnot P(x) \lor \lnot P(X)$ 
for all $x$).

One could also consider proving well-foundedness ``up to $\lnot\lnot$'',
asserting that every element is $\lnot\lnot$-accessible,
every sequence $\lnot\lnot$-contains a non-decreasing index,
for every non-empty subset there $\lnot\lnot$-exists a minimal element, etc.
These are formalized in the definition below, and in the corresponding file
\texttt{WFWeakDefinitions.agda}.

\begin{definition} \label{def:WFweakproperties} \hfill 
  \begin{enumerate}
    \item $R$ is \emph{weakly accessibly well-founded} ($\WFaccm$) if accessibility holds for all elements up to double negation:
      \[
        \forall x \in A.\; \lnot \lnot  (x \text{ is accessible})
      \]
    \item $R$ is \emph{weakly inductively well-founded} ($\WFindm$) if every inductive predicate holds for all elements up to double negation:
      \[
        \forall P \subseteq A.\;\text{$P$ is inductive} \Rightarrow \forall x \in A.\; \lnot \lnot (x \in P)
      \]
    \item $R$ is \emph{weakly coreductively well-founded} ($\WFcorm$) if every coreductive predicate holds for all elements up to double negation:
      \[
        \forall P \subseteq A.\;\text{$P$ is coreductive} \Rightarrow \forall x \in A.\; \lnot\lnot(x \in P)
      \]
    \item  $R$ is \emph{weakly well-founded minimality-wise} ($\WFminm$)
      if for every nonempty subset $P$ there $\lnot \lnot$-exists a minimal element in $P$:
      \[
        \forall P \subseteq A.\; P \neq \varnothing \Rightarrow \lnot \lnot \;
        (\exists x \in A.\; \text{$x$ is $P$-minimal})
      \]
    \item  $R$ is \emph{weakly well-founded minimality-wise for $\lnot \lnot$-closed predicates} ($\WFminDNEm$)
      if for every nonempty $\lnot \lnot$-closed subset $P$ there $\lnot \lnot$-exists a minimal element in $P$:
      % \[
      %   \forall P \subseteq A.\; P \neq \varnothing \Rightarrow \left(\ol{\ol P} \subseteq P\right) \Rightarrow \lnot \lnot \;
      % (\exists x \in P.\; \text{$x$ is $P$-minimal}) \]
      \[
        \forall P \subseteq A.\; P \neq \varnothing \Rightarrow \ol{\ol P} \subseteq P\Rightarrow \lnot \lnot \;
        (\exists x \in A.\; \text{$x$ is $P$-minimal})
      \]      
  \item $R$ is \emph{weakly sequentially well-founded} ($\WFseqm$) if no sequence is $R$-decreasing:
    \[
      \forall s:\nat \to A.\; \lnot \text{($s$ is $R$-decreasing)}
    \]
\end{enumerate} 
\end{definition}

In \cite{Terese}, the $\WFseqm$ definition is used, as in the classical mathematics textbooks.
\apcomment{Perhaps we should have a separate discussion between isWFseq- and isWFseq-not-not?} 

\subsection{Implications between the definitions}



% The logical relationships between all of the notions of well-foundedness defined 
% above are presented in Figure~\ref{fig:WF}.
%
\begin{figure}[hb]
\centering  
\begin{tikzpicture}[
  scale=0.7,
  every node/.style={transform shape},
  node distance=1cm and .5cm,
  box/.style={draw, rectangle, rounded corners, minimum width=1cm, minimum height=1cm, align=center},
  arrow/.style={-{Latex}, thick}
]

% Row 1: WFacc
\node[box] (WFacc) {$\WFacc$};
% \node[box, right=of WFacc] (NNWFacc) {$\lnot\lnot$WFacc};
\node[box, right=2.9cm of WFacc] (WFaccM) {$\WFaccm$};

\draw[arrow] (WFacc) -- (WFaccM);
% \draw[arrow] (NNWFacc) -- (WFaccM);
\draw[arrow, bend right] (WFaccM) to node[above, text=red] {$\accDNE$} (WFacc);

% Row 2: WFind
% \node[box, below=of WFacc] (WFind) {WFind};
% \node[box, right=of WFind] (NNWFind) {$\lnot\lnot$WFind};
% \node[box, right=of NNWFind] (WFindM) {WFind-};

% \draw[arrow] (WFind) -- (NNWFind);
% \draw[arrow] (NNWFind) -- (WFindM);


% \draw[arrow] (NNWFseq) -- (WFseqM);

% Row 5: WFminDNE -> WFminDNE-
\node[box, below=of WFacc] (WFminDNE) {$\WFminDNE$};
\node[box, below=of WFaccM] (WFminDNEM) {$\WFminDNEm$};

\draw[arrow] (WFminDNE) -- (WFminDNEM);

% Row 4: WFmin -> WFmin-
\node[box, below=of WFminDNE] (WFmin) {$\WFmin$};
\node[box, below = of WFminDNEM] (WFminM) {$\WFminm$};

\draw[arrow] (WFmin) -- (WFminM);

% Row 3: WFseq
\node[box, below=of WFmin] (WFseq) {$\WFseq$};
% \node[box, right=of WFseq] (NNWFseq) {$\lnot\lnot$WFseq};
\node[box, below= of WFminM] (WFseqM) {$\WFseqm$};

\draw[arrow] (WFseq) -- (WFseqM);

% Row 6: WFcor 
\node[box, below=of WFseq] (WFCor) {$\WFcor$};
\node[box, below=of WFseqM] (WFminCor) {$\WFcorm$};


% Arrows between rows
% \draw[arrow, <->] (WFacc) -- (WFind);
% \draw[arrow, <->] (NNWFacc) -- (NNWFind);
% \draw[arrow, <->] (WFaccM) -- (WFindM);

\draw[arrow, bend right = 90] (WFacc) to node[pos = 0.75,left, text = red] {$\rdec$} (WFseq);
\draw[arrow, bend right] (WFaccM) to (WFminDNEM);
\draw[arrow, bend right = 90] (WFminCor) to node[right, text=red] {$\accCor$} (WFaccM);  
% \draw[arrow, bend left = 55] (WFaccM) to (WFminM);  


\draw[arrow] (WFmin) -- (WFseq);
\draw[arrow] (WFminM) -- (WFseqM);
\draw[arrow] (WFmin) -- (WFminDNE);
\draw[arrow, bend right] (WFminM) to (WFminDNEM);
\draw[arrow, bend right] (WFminDNEM) to (WFminM);

\draw[arrow] (WFminDNE) to node[left, text = red] {$\accDNE$} (WFacc);
\draw[arrow, bend right=45] (WFminDNE) to node[pos=0.5, left, text=red] {$\mpe$} (WFseq);
\draw[arrow, bend right] (WFminDNEM) to node[right, text=red] {$\FB$} (WFaccM);
\draw[arrow, bend right] (WFseqM) to (WFminCor);
\draw[arrow, bend right] (WFminCor) to node [right, text=red] {$\mpe$} (WFseqM);
\draw[arrow] (WFCor) -- (WFminCor);
\draw[arrow, bend left = 110] (WFCor) to node[left, text=red] {$\accCor$} (WFacc);
\draw[arrow, bend left] (WFminCor) to node[below, text=red] {$\corDNE$} (WFCor);

\end{tikzpicture}
\caption{The logical relationships between notions of well-foundedness}
 \label{fig:WF} 
\end{figure}
\clearpage

\begin{figure}[hb]
\centering  
\begin{tikzpicture}[
  scale=0.7,
  every node/.style={transform shape},
  node distance=1cm and .5cm,
  box/.style={draw, rectangle, rounded corners, minimum width=1cm, minimum height=1cm, align=center},
  arrow/.style={-{Latex}, thick}
]

% Row 1: WFmin -> WFmin-
\node[box] (WFmin) {$\WFmin$};
\node[box, right=2.9cm of WFmin] (WFminM) {$\WFminm$};

\draw[arrow] (WFmin) -- (WFminM);

% Row 2: WFminDNE -> WFminDNE-
\node[box, below=of WFmin] (WFminDNE) {$\WFminDNE$};
\node[box, below=of WFminM] (WFminDNEM) {$\WFminDNEm$};

\draw[arrow] (WFminDNE) -- (WFminDNEM);

% Row 3: WFacc

\node[box, below=of WFminDNE] (WFacc) {$\WFacc$};

\node[box, below = of WFminDNEM] (WFaccM) {$\WFaccm$};
\draw[arrow, bend right] (WFacc) to (WFaccM);
\draw[arrow, bend right] (WFaccM) to node[below, text=red] {$\accDNE$} (WFacc);


% Row 4: WFseq
\node[box, below=of WFacc] (WFseq) {$\WFseq$};
\node[box, below= of WFaccM] (WFseqM) {$\WFseqm$};

\draw[arrow] (WFseq) -- (WFseqM);

% Row 5: WFcor 
\node[box, below=of WFseq] (WFCor) {$\WFcor$};
\node[box, below=of WFseqM] (WFminCor) {$\WFcorm$};

% \draw[arrow, bend left = 55] (WFaccM) to (WFminM);  

% Inter-row arrows
\draw[arrow] (WFacc) to node[right, text = red] {$\rdec$} (WFseq);
\draw[arrow, bend right] (WFaccM) to (WFminDNEM);
\draw[arrow, bend right = 90] (WFminCor) to node[right, text=red] {$\accCor$} (WFaccM);  

\draw[arrow, bend right = 90] (WFmin) to (WFseq);
\draw[arrow] (WFaccM) -- (WFseqM);
\draw[arrow] (WFmin) -- (WFminDNE);
\draw[arrow, bend right] (WFminM) to (WFminDNEM);
\draw[arrow, bend right] (WFminDNEM) to (WFminM);

\draw[arrow] (WFminDNE) to node[right, text = red] {$\accDNE$} (WFacc);
\draw[arrow, bend right=45] (WFminDNE) to node[pos=0.5, left, text=red] {$\mpe$} (WFseq);
\draw[arrow, bend right] (WFminDNEM) to node[left, text=red] {$\FB$} (WFaccM);
\draw[arrow, bend right] (WFseqM) to (WFminCor);
\draw[arrow, bend right] (WFminCor) to node [right, text=red] {$\mpe$} (WFseqM);
\draw[arrow] (WFCor) -- (WFminCor);
% \draw[arrow, bend left = 110] (WFCor) to node[left, text=red] {$\accCor$} (WFacc);
\draw[arrow, bend left] (WFminCor) to node[below, text=red] {$\corDNE$} (WFCor);

\draw[arrow, dashed, bend left=80, blue] (WFCor) to node[left, text=blue] {$\accCor$} (WFacc);

\end{tikzpicture}
\caption{The logical relationships between notions of well-foundedness}
 \label{fig:WF2} 
\end{figure}
\clearpage

All of the above definitions of well-foundedness are classically equivalent.
But constructively, the only provable equivalence is between the inductive and accessible 
formluations (reflecting the fact that accessibility is defined as the least inductive predicate).
Formalizing the remaining implications enabled us to identify where exactly classical logic 
is used, and how much of it is truly needed.

The logical relationships between the various definitions are summarized in Figure \ref{fig:WF}.
An arrow from one node to another with no label indicates direct logical implication,
provable constructively with no additional assumptions. An arrow with a label indicates an additional 
(semi-)classical hypothesis needed to establish the implication. 
The definitions of these hypotheses are given in Figure \ref{tab:cprop}.
All of the implications have been 
formalized within the WellFounded subdirectory of the Agda repository.

{
\def\arraystretch{1.3}
\begin{figure}[h!]
\small 
\begin{tabular}{@{}l l l @{}}
\toprule
\textbf{Property} & \textbf{Definition}  &\textbf{Agda Code}  \\
\midrule
$\rdec$   & $R$ is decidable 
          & $\forall$ \verb|{x} {y}| $\to$ \verb|EM (R x y)|\\
$\FB$     & $R$ is finitely branching 
          & $\mathtt{\forall (a : A) \to \Sigma [ xs \in List A ] (\forall b \to R a b \to b \in{}List\, xs)}$ \\
$\mpe$    & Sequences are $\lnot\lnot$-closed
          & $\forall\ \mathtt{(f : \nat \to A) \to \lnot\lnot Closed 
          (\lambda x \to \Sigma [ k \in \nat ] (f\, k \equiv x))}$ \\
$\corDNE$ & Coreductives are $\lnot\lnot$-closed 
          & $\mathtt{\forall (P : \mathcal{P} A) \to R}$-$\mathtt{coreductive\ P \to \lnot\lnot Closed\ P}$\\ 
$\accDNE$ & Accessibility is $\lnot\lnot$-closed
          & $\lnot\lnot$\verb|Closed (R -accessible)| \\
$\accCor$ & Accessibility is coreductive 
          & \verb|R -coreductive (R -accessible)| \\
\bottomrule
\end{tabular}
\centering
\caption{Classical Properties Used in the Well-Foundedness Diagram}
\label{tab:cprop}
\end{figure}
}

\apcomment{Make another version of the diagram, swapping WFmin and WFacc rows.}

% The principles appearing in the labels of Figure \ref{fig:WF} are valid for many rewriting systems,
% and are classically true.  
Figure \ref{tab:cprop} illustrates that the network of logical relationships between
constructive notions of well-foundedness is quite rich indeed. 
Taking the $\lnot\lnot$-closures of 
well-foundedness properties cuts down some, but not all, of the complexity.
For example, the two minimality principles become equivalent.
% The implication from the inductive to sequential definition no longer requires
% decidability of $R$.
% On the other hand, the reverse
At the same time, the weak version of the sequential definition is unable to imply 
the (weak) accessible one without an additional hypothesis $\accCor$, 
which may be described as the constructive contrapositive of the definition of accessibility.
In the context of rewriting systems,
this condition asserts the existence of a function which maps any
element that is \emph{not} strongly normalizing to a one-step reduct of it having the same property.
Assuming $\accCor$, all notions of well-foundedness
are constructively equivalent up to $\lnot\lnot$.

Other observations that can be gleaned from the figure include the following.
\apcomment{The macros have to fixed throughout.}
\begin{enumerate}
  \item The implication from $\isWFacc$ to $\isWFseq$ requires the underlying relation to be decidable. 
    This assumption is no longer necessary on the $\lnot\lnot$-translated side.
  \item WFmin is a very strong assumption and implies WFseq unconditionally.
  The more reasonable WFminDNE requires the image of every sequence to be $\lnot\lnot$-closed 
  to complete the implication.  This condition can be considered as a special case of Markov's Principle
  (if one assumes that equality on $A$ is decidable).
  \item On the $\lnot\lnot$-side, WFmin- and WFminDNE- are equivalent, are directly implied by $\isWFaccm$, 
    and directly imply $\isWFseqm$  \apcomment{Fix macros}.
  \item All definitions imply $\WFcorm$.  This weakest definition implies $\isWFaccm$ assuming the 
    ``constructive contrapositive of accessibility'', $\accCor$.
    %While this condition is implied by $\isWFseqm$, it does not appear to imply anything on its own.
  \item Assuming $\accCor$, $\isWFacc$ can also be derived from $\WFcor$. % , the stronger version of $\WFcorm$.
    \apcomment{Add the ``is''!}

    (This is analogous to how $\isWFminDNE$ is a natural weakening of 
    $\isWFmin$ that is sufficient to recover $\isWFacc$ in the presence of {$\accDNE$}.)

  \item At the same time, if the relation is finitely branching ($\FB$), then WFminDNE-
    implies WFacc- directly.

    (It may be noted that $\FB$ implies $\accCor$ whenever the relation $R$ is decidable
    and $R$-accessibility is \emph{weakly} decidable;  this is proved in \texttt{Coreductive.agda}.)
  % \apcomment{The previous observation suggests the question of whether isWFseq- might
  % imply isWFminDNE- via decidability of minimal elements.\\
  % However, in trying to prove this implication, the hypothesis asserting non-existence of
  %  a minimal element of some given non-empty $\lnot\lnot$-closed predicate
  %  automatically entails that any particular element of interest is not normal.\\
  %  Unless it's not satisfying $P$?¬†\emph{We need to decide whether it is P-minimal as well.}}
  % \apcomment{(This seems easy: The converse implication isWFminCor to isWFseq- requires the sequence in question to
  % have decidable image, leading to a further weakening of isWFseq-.)}

% \item \apcomment{Fix with macros}. Since isWFminDNE- implies isWFseq-, the former also implies isWFminCor-.
%   But the converse fails: If a subset/predicate $P$ is $\lnot\lnot$-closed,
%   we cannot, in general, conclude it is coreductive.
  \item \apcomment{Delete? In general, the coreductive properties speak to the ability to choose
  a successor (strong existence).  This ability is central to being able to
  define sequences.  Therefore, sequential definitions generally require
some coreductive situation to be applicable.}

  % \item Assuming normal forms are decidable,
  % isWFseq implies a very weak version of minimality, isWFminEM.
  % On its own this property is insufficient to imply anything else,
  % so we have nothing else to say about it.
\end{enumerate}

We have also considered the statement that the complement of every coreductive predicate
  has a least element.  This statement and its $\lnot\lnot$-version are both equivalent to $\WFcorm$
  (see \texttt{CoreductiveImplications.agda}), so we have not included them in the figure.  

We also did not include the inductive definition, Definition \ref{def:WFproperties}.\ref{def:WFind}.
  Logically, it is trivially equivalent to the accessible one, but its Agda formulation has a defect: 
  the inductive well-foundedness property lands in the larger universe $\mathtt{Set}_1$, due to 
  quantification over all predicates on $A$.  (This defect is also present in $\isWFmin$, $\isWFminDNE$, and \texttt{isWFcor}.)

In \cite{Terese}, well-foundedness is defined as in the classical mathematics textbooks,
as the absence of an infinite $R$-decreasing sequence.
(Again, well-foundedness of $R$ corresponds to strong normalization of its converse.)
\apcomment{Add a discussion about isWFseq- vs. isWFseq$\lnot\lnot$.}

We consider $\isWFacc$ the canonical constructive definition of a well-founded relation.

\apcomment{Todo: 1. Filter through the rest, and see if there's anything we may still want to keep.\\
  2. Include a subsection, or a section, with examples.  Provide examples where some decidability 
properties are provable, and others are not.}

\subsection{Old. Delete?}

Translating this statement directly into type theory yields the formula

\[\tag{$\isWFseqm$} \lnot \big(\exists s : \nat \to A \forall k : \nat. \  R \,(s\,(k+1)) \, (s\, k) \big) \]

(The label $\isWFseqm$ refers to the name of the corresponding term in \texttt{Wellfoundedness.agda}.)
Constructively, this is not a useful hypothesis, as it does not provide any positive computational content and requires an explicit sequence to be defined.

A stronger formulation asserts that, for any sequence, there exists an element
in the sequence that does not reduce to the next one.  This yields the statement
\[\tag{$\isWFseq$} \forall s : \nat \to A \exists k : \nat.\, \lnot \, R \,(s\,k)\,(s\,(k+1)) \]

These two conditions are classically equivalent, but not constructively so.
Indeed, $\isWFseq$ certainly implies $\isWFseqm$, but the converse only holds classically.

Another classical formulation of well-foundedness
asserts that every non-empty subset
contains a minimal element.  That is,
\[ \tag{$\isWFmin$} \forall P \subseteq A. P \neq \emptyset \to \exists x \in P. (\forall y. Ryx \to y\notin P) \]

While classically equivalent to the previous one, see \cite[Exercise A.1.8]{Terese},
constructively we only have the implication $\isWFmin \then \isWFseq$.

The canonical constructive definition of well-foundedness is that
every inductive predicate is universally true.
This is constructively equivalent to the statement that every element
is accessible.  In Agda, these concepts are encoded as follows.
{\small
\begin{verbatim}
  _-inductive_ : ùìü A ‚Üí Set
  _-inductive_ œÜ = ‚àÄ x ‚Üí (‚àÄ y ‚Üí R y x ‚Üí œÜ y) ‚Üí œÜ x

  _isWFind : Set‚ÇÅ
  _isWFind = ‚àÄ (œÜ : ùìü A) ‚Üí _-inductive_ œÜ ‚Üí ‚àÄ x ‚Üí œÜ x

  data _-accessible : ùìü A where
    acc : ‚àÄ {x : A} ‚Üí (‚àÄ y ‚Üí R y x ‚Üí _-accessible y) ‚Üí _-accessible x

  _isWFacc : Set
  _isWFacc = ‚àÄ (x : A) ‚Üí x ‚àà _-accessible
\end{verbatim}
}
Although the two notions are equivalent, the latter definition allows us to do induction on the proof of accessibility of an individual element $x \in A$.  This makes such proofs easier to write in Agda, thus we take
\verb|_isWFacc| as \emph{the} standard notion of well-foundedness for relations.

\subsection{Relations between the main definitions}

We have now seen five notions of a well-founded relation, only two of which
are seen to be logically equivalent.

This raises several questions.
\begin{itemize}
\item Are all these notions truly distinct?  If one cannot furnish a proof of implication,
can we provide a counterexample?
\item Under what hypotheses do the implications become provable?
\item How ``admissible'' are such hypotheses, and how often can we hope for them to be valid?
\end{itemize}

The situation of separating these notions is complicated by the fact that, for all
\emph{definable} predicates, the classical and constructive notions do coincide.
(We have not proved this, but see \cite{Berardi} for a related result.)
So there is no hope to discriminate these notions via explicit counterexamples.
Rather, we could attempt to show that one does not imply the other by proving that
such an implication would yield a ``constructive taboo'': a proposition known to be
unprovable without additional classical assumptions.

For example, the archetype of a well-founded relation is the strict order \verb|<|
of natural numbers.  The usual induction readily validates $\isWFacc$ for \verb|<|.
  At the same time, the file \texttt{WFCounters.agda} shows that
asserting $\isWFmin$ for \verb|<| implies that every subset of the natural numbers is decidable.  Since this is clearly not provable in Agda without classical axioms,
this argument shows that the implication from $\isWFacc$ to $\isWFmin$ is not provable.

Such distinctions have consequences for rewriting theory.
For example, $x\in \SN_R$ iff $x$ is $\bar{R}$-accessible (where $\bar{R}$ denotes
the converse of $R$).  Thus, if $\bar{R}$ is well-founded, $R \models \gSN$.
Yet actually computing the normal form of a given $x$ seems to require a
strong form of decidability of being $R$-minimal, namely:
\[
\tag{$\isMinDec$} \forall x. \left(\exists y. Ryx\right) \lor \left(\forall y. \lnot Ryx\right)
\]
(Note that asking whether $x$ is a normal form constitutes the weaker disjunction
$\lnot\lnot\left(\exists y. Ryx\right) \lor \left(\forall y. \lnot Ryx\right)$.)

On the other hand, $\isWFmin$ trivially implies that each $x \in A$ is weakly normalizing.
Indeed, given $x \in A$, consider the predicate $P_x(y) = x \mstep y$.
This predicate is non-empty, since the empty reduction yields a proof of $P_x(x)$.
Let $n$ be a $P_x$-minimal element.  Then $x \mstep n$.  Moreover, for any $y$,
If $n \rstep y$, then $\lnot(P_x(y))$.  But since reductions from $x$ are closed downward,
no such $y$ can exist, and hence $n$ is a normal form of $x$.

% \greyout{From the perspective of rewriting theory, it would seem wild indeed if
% $\SN$ did not imply $\WN$.
%
These questions motivated us to take a closer look at the issue of well-foundedness.
Our analysis revealed a number of additional related hypotheses, having a complex
network of relations.  %These are displayed in Figure \ref{f:wf}.
These are recorded in the file \verb|Wellfounded.agda|


% \apcomment{Things to do:}
% \begin{itemize}
%   \item Reiterate/articulate the role of classical principles in establishing relationships between definitions of 
%     well-foundedness constructively 
%   \item List/discuss? classical principles appearing in the figure 
%   \item Discuss the figure overall -- refer to the enumerated list below 
%   \item Create ``narrative bridges'' between these items 
%   \item Final thing: Instantiate some of the classical principles on simple examples of term rewrite systems.
% \end{itemize}
%
%
