\section{Definitions}
\label{sec:Definitions}
\sacomment{Need to update move from WNFP to NP, WMFP to MP, NP to NP\_0}
\sacomment{Need to update to refer to macros for properties}
The following definitions are provided to ensure clarity and precision
in our discussion.
 When useful, we also include the name and type of
definition as we have implemented it in Agda, allowing the report to guide the code
and vice versa.



\begin{definition}
    An abstract rewrite system (\emph{ARS}) is a structure $\mathcal{A} = (A, R_\alpha)$ where
     $A$ is a set of elements and $R_\alpha$ is a set of binary relations on $A$.
\end{definition}

For the rest of this section, let $A$ be a fixed set, and $R$ be a relation on $A$.
(In the Agda code supplement, this is represented by a type $A : \bset$,
and a binary type family $R : A \to A \to \bset$.)

\greyout{We denote by $\tilde R$ the relational converse of $R$ ($(x,y) \in \tilde R \iff (y,x) \in R$),
and by $R;R'$ the relational composition of $R$ and $R'$.}


\begin{notation}
  The following notions are standard.  For precise definitions,
  see \texttt{ClosureOperators.agda}.
  \begin{enumerate}
    \item $R^r$ denotes the \emph{reflexive closure} of $R$.
    \item $R^s$ denotes the \emph{symmetric closure} of $R$.
    \item $R^+$ denotes the \emph{transitive closure} of $R$.
    \item $R^* = (R^r)^+$ denotes the \emph{reflexive-transitive closure} of $R$.
    \item $R^= = (R^s)^*$ denotes the \emph{equivalence relation generated by} $R$.
  \end{enumerate}
\end{notation}




In the context of abstract rewriting, we will often write $a \rstep b$
in place of $(a,b) \in R$.  Similarly, we will write $a \mstep b$ for $(a,b) \in R^*$,
$a \bstep b$ for $(b,a) \in R$.  When the relation $R$ is clear from the context,
we may drop the corresponding subscript.

We next define rewriting-theoretic concepts like confluence and normalization relative to a fixed element of $A$; global versions of these properties are obtained by universal quantification.
For equivalent definitions, see \texttt{ARS-Properties.agda}.

\begin{definition} The following definitions relate to normalization. Let $A$ and $R$ be as above, and let $a \in A$.
  \begin{description}
    \item[$a \in \NF_R$] \emph{$a$ is a normal form} if $(a,b) \notin R$ for any $b \in A$ 
    \item[$a \in \WN_R$] \emph{$a$ is weakly normalizing} if $a \mstep b$ for some $b \in \NF_R$.
    \item[$a \in \SN_R$]  \emph{$a$ is $R$-accessible}, see Definition \ref{d:WFacc}.
  \end{description}
\end{definition} 

 
\begin{definition} The folowing definitions relate to being minimal. Let $A$ and $R$ be as above, and let $a \in A$.
    \begin{description}
        \item[$a \in \MF_R$] \emph{$a$ is a minimal form} if $a \mstep b \implies b \mstep a$ for any $b \in A$.
        \item[$a \in \WM_R$] \emph{$a$ is weakly minimalizing} if $a \mstep b$ for some $b \in \MF_R$.
        \item[$a \in \SM_R$]  \emph{$a$ is strongly minimalizing} if either $a \in MF_R$ or every element one $R$ step from $a$ is also strongly minimalizing.
    \end{description}
\end{definition}
We found that there was a strong interrelationship between the normalizing properties and the minimal properties. This relationship is 
captured in Figure \ref{fig:norm-hierarchy}.

\begin{figure}[h]   
    \centering
        \begin{tikzpicture}[auto,
            arrowstyle/.style={->, line width=1pt, >={Latex[length=3mm, width=2mm]}, shorten >=2pt}]
            % A box style
            \tikzstyle{boxnode} = [draw, rectangle, text centered,minimum width=1.2cm, inner sep=3pt]   
            % Define the nodes
            \node (SN) [boxnode] at (4,0) {$\SN$};
            \node (WN) [boxnode, above right=0.5cm and 0.5cm of SN] {$\WN$};
            \node (SR) [boxnode, below right=0.5cm and 0.5cm of SN] {$\SM$};
            \node (WR) [boxnode, below right=0.5cm and 0.5cm of WN] {$\WM$};
            
            % Draw the arrows to form a diamond
            \draw [arrowstyle] (SN) -- (WN);
            \draw [arrowstyle] (SN) -- (SR);
            \draw [arrowstyle] (WN) -- (WR);
            \draw [arrowstyle] (SR) -- (WR);
        \end{tikzpicture}
        \caption{A hierarchy of normalizing and minimal properties.}
        \label{fig:norm-hierarchy}
\end{figure}

The implications will be explored in detail in Section \ref{sec:Implications}. 

A trivial implication not captured in the above figure is covered in Proposition \ref{prop:nftomf}. 
\begin{proposition}\label{prop:nftomf}
    $a\in NF_R \implies a \in MF_R$ 
\end{proposition}    
\begin{proof}
    See, \verb|NF ⊆ MF : ∀x → NFx → MFx| in \texttt{ARS-Implications.agda}.
\end{proof}

\begin{definition} The following definitions relate to confluence. Let $A$ and $R$ be as above, and let $a \in A$.
    \begin{description}
        \item[$a \in \WCR_R$] \emph{$a$ is weakly Church-Rosser (or weakly confluent)} if $c \bstep a \rstep b \implies c \mstep d \bmstep b$.
        \item[$a \in \CR_R$] \emph{$a$ is Church-Rosser (or confluent)} if $c \bmstep a \mstep b \implies c \mstep d \bmstep b$.
        \item[$a \in \NPe_R$] \emph{$a$ has the equivalence normal form property} if $a \estep b \implies a\mstep b$ for any $b \in \NF$.
        \item[$a \in \NP_R$] \emph{$a$ has the normal form property} if $c \bmstep a \mstep b \implies c \mstep b$ for any $b \in \NF$\footnote{In \terese $\NF$ is used to denote $\NPe$, whereas we have chosen to use $\NF$ to denote normal form.}. 
        \item[$a \in \MP_R$] \emph{$a$ has the minimal form property} if $c \bmstep a \mstep b \implies c \mstep b$ for any $b \in \MF$.
        \item[$a \in \UN_R$] \emph{$a$ has the unique normal form property} if $a \estep b \implies a \equiv b$  for any $a, b \in NF$.
        \item[$a \in \UNto_R$] \emph{$a$ has the unique normal form property with respect to reduction} if $c \bmstep a \mstep b  \implies b \equiv c$  for any $b, c \in NF$.
    \end{description}
\end{definition}

Again, we found that there was a strong interrelationship between the properties, captured in Figure \ref{fig:conf-hierarchy}, which are explored in Section \ref{sec:Implications}.

\begin{figure}[h] 
    \centering

        \begin{tikzpicture}[auto,
          arrowstyle/.style={->, line width=1pt, >={Latex[length=3mm, width=2mm]}, shorten >=2pt}]
          % A box style
          \tikzstyle{boxnode} = [draw, rectangle, text centered,minimum width=1.2cm, inner sep=3pt]
      
          % Place the nodes vertically (top to bottom)
          \node (Confluent) [boxnode] at (-4,0) {$\CR$};
          \node (RP)        [boxnode, right=.5cm of Confluent] {$\MP$};
          \node (WN)        [boxnode, right=.5cm of RP] {$\NP$};
          \node (UN)        [boxnode, right=.5cm of WN] {$\UNto$};
      
          % Draw arrows downwards
          \draw[arrowstyle] (Confluent) -- (RP);
          \draw[arrowstyle] (RP) -- (WN);
          \draw[arrowstyle] (WN) -- (UN);
       
          \end{tikzpicture}
          \caption{A hierarchy of confluent properties.}
          \label{fig:conf-hierarchy}
    
\end{figure}

\sacomment{Make sure somewhere it is mentioned that NP equals $NP_=$ and that UN does not equal UNto.}


\sacomment{Work for Saturday: Get the final definitions written up: namely the RP definitions and maybe make a figure to show those interrelationships}.
%     \begin{definition}
    
%   An element $a \in A$ is \emph{R-weakly confluent} ($WCR_R$) if all single step relations from $a$ can always converge
%     via multi-step relations to some common reduct.

%     A relation $R$ is \emph{weakly confluent} (AKA weakly Church-Rosser (WCR)) if every $a \in A$ is R-weakly confluent.
% \end{definition}

% \begin{definition}
%     An element $a \in A$ is \emph{R-confluent} ($CR_R$) if all multi-step relations from $a$ can always converge
%     via multi-step relations to some common reduct.
%     A relation $R$ is \emph{confluent} (AKA Church-Rosser (CR)) if every $a \in A$ is R-confluent.
% \end{definition}

\begin{definition}
  \label{d:WFacc}
  An element is \emph{accessible} if ...
\end{definition}

% \begin{definition}
%     An element $a \in A$ is \emph{$R$-weakly normalizing} ($WN_{R}$)if $a \mstep b$ for some normal form $b \in A$.

%     A relation $R$ is weakly normalizing (WN) if every $a \in A$ is $R$- weakly normalizing.
% \end{definition}

% \begin{definition}
%     An element $a \in A$ is \emph{$R$-strongly normalizing} ($SN_R$) if every sequence of relations starting from $a$ is finite.

%     A relation $R$ is strongly normalizing (SN) if every
%     $a \in A$ is $R$-strongly normalizing.
% \end{definition}

The above definition of SN is taken from [TeReSe].
When working in Agda, we make use of the alternative definition presented in [TeReSe] ($\leftarrow$ is accessibly well-founded).
The \ref{sec:Well-foundedness} section clarifies this definition.

% \begin{definition}
%     An element $a \in A$ has the \emph{$R$-weak normal form property} ($WNFP_{R}$) if $a \mstep b$ and
%     $a \mstep c \implies c \mstep b$, for all $c \in A$ and all normal form $b \in A$.

%     A relation $R$ has the \emph{weak normal form property} (WNFP) if every $a \in A$ has the $R$-weak normal form property.
% \end{definition}

% \begin{definition}
%     The \emph{equivalence relation} of $R$ is the smallest relation $\estep$ that contains $R$ and is reflexive, transitive, and symmetric.
% \end{definition}

% \begin{definition}
% An element $a \in A$ has the \emph{$R$-normal form property} ($NFP_{R}$) if
% $a \estep b$  $\implies$
% $a \mstep b$, for any normal form $b \in A$.

% A relation $R$ has the \emph{normal form property} (NFP) if every $a \in A$ has the $R$-normal form property.
% \end{definition}

% In ARS-Implications.agda we show the equivalence of WNFP and NFP when applied globally in the function $\mathtt{NP \leftrightarrow WNFP}$.

% In the next definition we deonte two elements $a, b \in A$ being equivalent with $a \equiv b$.
% \begin{definition}
% An element $a \in A$ has the \emph{{R}-unique normal form property} ($UN_{R}$) if
% $a \estep b$  $\implies$
% $a \equiv b$, for any normal form $b \in A$.

% A relation $R$ has the \emph{unique normal form property} ($UN$) if every $a \in A$ has the $R$-unique normal form property.
% \end{definition}


% \begin{definition}
% An element $a \in A$ has the \emph{${R}$-unique normal form property with respect to reduction} ($UN^ \to _{R}$) if
% $b \bmstep  \cdot  \mstep c$  $\implies$ $b \equiv c$, for all normal forms $b,c \in A$.

% A relation $R$ has the \emph{unique normal form property with respect to reduction} ($UN^\to$) if every $a \in A$ has the
% $R$-unique normal form property with respect to reduction.
% \end{definition}
% In ARS-Implications.agda we show that $UN$ implies $UN\to$ but the inverse implication doesn't hold, as seen
% in counterexample (\sacomment{TODO: put counterexample here when section is complete}).

\begin{definition}
    A \emph{sequence (in $A$)} is a function from the natural numbers to $A$:
    \begin{align*}
      &s : \nat \to A \\
      &s = (s_0,s_1,s_2,\dots)
    \end{align*}
\end{definition}

\begin{definition}
    A sequence is \emph{$R$-increasing} if every term is $R$-related to its preceding term.
\end{definition}

\begin{definition}
    A sequence is \emph{bounded} if there exists an element $a \in A$ to which all elements of the sequence reduce.
\end{definition}


% \begin{definition}
%     An element $a \in A$ has the \emph{minimal form property} ($MF$) if $a \mstep b \implies b \mstep a$ for all $b \in A$.
% \end{definition}

% Note that being a normal form is a trivial case of the minimal form property (as we prove in ARS-implications.agda
% function $\mathtt{NF\subseteq MF : \forall {x} \to NF x \to MF x}$).

\begin{definition}\label{d:RP}
    A relation $R$ has the \emph{recurrence property} (RP) if every bounded, increasing sequence 
    has an element $a \in MF$.
\end{definition}


\begin{definition}\label{d:RP-}
    A relation $R$ has the \emph{weak recurrence property} (RP-) if for every increasing 
    sequence with bound $a$, there is an element $i$ of the sequence such that 
    $a \mstep f(i)$.
\end{definition}


% \begin{definition}
%     An element $a \in A$ is \emph{$R$-weakly minimal} ($WM_{R}$)if $a \mstep b$ for some minimal form $b \in A$.

%     A relation $R$ is weakly minimal (WM) if every $a \in A$ is $R$-weakly minimal.
% \end{definition}

% \begin{definition}
%     An element $a \in A$ is \emph{$R$-strongly minimal} ($SM_R$) if either $a$ itself is a minimal form or every element one $R$ step
%     from $a$ is also strongly minimal.

%     A relation $R$ is strongly minimal (SM) if every
%     $a \in A$ is $R$-strongly minimal.
% \end{definition}

% \begin{definition}
%    An element $a \in A$ has the \emph{${R}$-weak minimal form property} ($WMFP_R$) if
%    $a \mstep b$ and $a \mstep c$  $\implies$
%    $c \mstep b$, for all $c \in A$ and all $b \in A$ with the minimal form property.

%    A relation $R$ has the \emph{weak minimal form property} (WMFP) if every $a \in A$ has the $R$-weak minimal form property.
% \end{definition}
\begin{definition}
    \label{d:inc}
    A relation $R \sse A \times A$ is called \emph{increasing} if there
    exists a ``size function'' $|-| : A \to \nat$ satisfying, for all $x, y \in A$,
    \[ Rxy \to |x| < |y| \]
\end{definition}

Definitions to add:
\begin{enumerate}
    \item Finite branching
    \item Any other terms from well foundedness
    \item The other terms we have for strongly
\end{enumerate}
