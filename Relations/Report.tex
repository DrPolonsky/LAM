\documentclass{scrartcl}
% Packages
\usepackage{hyperref}
\usepackage{tikz}
\usepackage{amsmath}
\usepackage{pifont}
\usepackage{mathrsfs}
\usetikzlibrary{arrows.meta, positioning}

\definecolor{darkgreen}{rgb}{0.0, 0.5, 0.0}


\title{Summer 2024 Report}
\author{Sam Arkle}
\date{\today}

\begin{document}

\maketitle

\section{Introduction}
This is a report on the progress I have made during the summer of 2024 working with Dr. Polonsky \footnote{Assisstant Professor, Department of Computer Science, Appalachian State University.}. I have been writing on the topic of relations, working primarily from Term Rewriting Systems (TeReSe) \footnote{(Term Rewriting Systems. (2003). United Kingdom: Cambridge University Press.)}.
The objective of this work has been to both develop a formal understanding of relations and to build a library in Agda \footnote{\href{https://github.com/DrPolonsky/LAM/tree/main/Relations}{Github repository for this project's code}} that will be used as a foundation to further work in theoretical computer science.
\\
I have been focussed on Chapter 1 of TeReSe which covers abstract reduction systems (ARS) as well as the appendix (sections 1-3) which provides the necessary mathematical background for the rest of the book (e.g. relations, ordinals, inductive definitions and the Knaster-Tarski lemma). Where the book has made use of classical logic I have investigated the possibility of using constructive alternatives.

\section{Relations}

\subsection{Well-foundedness}
\textcolor{red}{Talk about the different types of wellfoundedness, starting with the one given in the book, the reason for thinking it is classical and not constructive, and provide an image showing the relation between the notions of wellfoundedness we have. Talk about future work in this area.}
\\
We have worked with four different notions of well-foundedness in order to explore the connections between them. These four notions each depend on one of the following four definitions:
\begin{enumerate}
    \item accessible \textcolor{red}{For these definitinos is it best to just use the code from agda which is clear, or should we be trying to provide a more 'human' definition to accompany the code?}
    \item inductive predicate
    \item minimal element
    \item non-decreasing index
\end{enumerate}
The four main notions of a relation \textit{R} being well-founded a set \textit{S} we have worked with are:
\begin{enumerate}
    \item \textit{R} is well-founded if every element is \textit{R}-accessible (where an element \textit{x} is \textit{R}-accessible if all elements \textit{R}-below \textit{x}  are themselves \textit{R}-accessible).
    \item \textit{R} is well-founded if every inductive predicate is universally true (where a predicate $\varphi$ is inductive if $\varphi\,x$ is true whenever $\varphi\,y$ is true for all elements $y$ $R$-below $x$).
    \item \textit{R} is well-founded if every non-empty subset of $S$ has a minimal element with respect to $R$.
    \item \textit{R} is well-founded if every sequence contains a non-decreasing index.
\end{enumerate}
Further, we explored weaker variants of these notions of well-foundedness by defining well-foundedness using double negation:
\begin{enumerate}
    \item \textit{R} is well-founded if every element is $\lnot \lnot$  \textit{R}-accessible.
    \item \textit{R} is well-founded if for every inductive predicate $\varphi \; \lnot \lnot \varphi \; x$.
    \item \textit{R} is well-founded if for every non-empty subset of $S$ there is $\lnot \lnot$ a minimal element with respect to $R$.
    \item \textit{R} is well-founded if there is no infinite $R$-decreasing sequence in $S$ (this is the definition of well-foundedness found in TeReSe).
\end{enumerate}

The following graphic illustrates the connections we have found between these definitions and those we are still seeking to find. Green arrows indicate that a definition can be translated into another, red arrows indicate that we believe a translation should be possible but we have not yet found it.

\begin{tikzpicture}[node distance=2cm, auto]
    % Standard definitions
    \node (std1) [draw] {isWFacc};
    \node (std2) [below of=std1, draw] {isWFind};
    \node (std3) [below of=std2, draw] {isWFmin};
    \node (std4) [below of=std3, draw] {isWFseq};

    % Weaker definitions
    \node (weak1) [right of=std1, xshift=4cm, draw] {isWFacc-};
    \node (weak2) [below of=weak1, draw] {isWFind-};
    \node (weak3) [below of=weak2, draw] {isWFmin-};
    \node (weak4) [below of=weak3, draw] {isWFseq-};

    % Arrows
    \draw[->, thick, darkgreen] (std1) -- (weak1);
    \draw[<->, thick, darkgreen] (std1) -- (std2);
    \draw[<->, thick, darkgreen] (weak1) -- (weak2);
    \draw[->, thick, darkgreen] (std2) -- (weak2);
    \draw[->, thick, red] (std2) -- (std3) node[pos=0.5, right, red] {?};
    \draw[->, thick, darkgreen] (weak2) -- (weak3);
    \draw[->, thick, darkgreen] (std3) -- (weak3);
    \draw[->, thick, darkgreen, bend left] (std3) to (std4);
    \draw[->, thick, darkgreen, bend left] (weak3) to (weak4);
    \draw[->, thick, darkgreen] (std4) to (weak4);
    \draw[->, thick, red, bend left] (std4) -- (std3) node[pos=0.5, left, red] {?};
    \draw[->, thick, red, bend left] (weak4) -- (weak3) node[pos=0.5, left, red] {?};
\end{tikzpicture}

As future work we want to know whether the missing reductions can be defined, or what the minimal additional requirements are for making those reductions.

\subsection{Definitions}
\textcolor{red}{Go through some of the main definitions formalised from Terese, focussing on where we have used constructive alternatives to the classically given definitions
Could talk here about omega bounded stuff too!}
\\
One aspect of the project has been working through the definitions, propositions, and theorems in TeReSe and formalising them in Agda.
For example, in TeReSe the diamond property is defined:
\begin{center}
    $a \in A$ has the \textit{diamond property} if $\forall b, c \in A (c \leftarrow a \rightarrow b \implies \exists d \in A c \rightarrow d \leftarrow b)$. The reduction relation $\rightarrow$ has the \textit{diamond property} if every $a \in A$ has the \textit{diamond property}.
\end{center}
In Agda we have defined the diamond property as:
\begin{flushleft}
    \texttt{\ding{117} : Set}\\
    \texttt{\ding{117} = $\forall a, b, c \rightarrow R_{\alpha} a b \rightarrow R_{\alpha} a c \rightarrow \Sigma[ d \in A ] (R_{\alpha} b d \times R_{\alpha} c d)$}
\end{flushleft}
In formalising the propostions and theorems we also provided solutions to them. \\
The remainder of this section highlights definitions or proofs we hae expressed differently to TeReSe along with an explanation of why we have done so.

\subsubsection{Strongly Normalizing}
\begin{center}
    In TeReSe: $a \in A$ is \textit{strongly normalizing} if every reduction sequence starting from $a$ is finite. The reduciton relation $\rightarrow$ is \textit{strongly normalizing} (SN) if every $a \in A$ is strongly normalizing.
\end{center}
In Agda we have defined strongly normalizing as:

\begin{flushleft}
    \texttt{data is\_-accessible\_ : $\mathscr{P} A$ where}\\
    \texttt{\ \ \ \ acc : $\forall$ \{x : A\} $\rightarrow$ ($\forall$ y $\rightarrow$ R y x $\rightarrow$ is\_-accessible\_ y) $\rightarrow$ \quad is\_-accessible\_ x}\\
    \texttt{is\_SNacc\_ : $\mathscr{P} A$}\\
    \texttt{is\_SNacc\_ x = is (\textasciitilde R R) -accessible x}\\
    \texttt{is\_SN\_ : $\mathscr{P} A$}\\
    \texttt{is\_SN\_ = is\_SNacc\_}
\end{flushleft}


\subsection{Knaster Tarski}
Go through different proofs Here

\subsection{Newmans lemma}
What it is and the different definitions again

\subsection{}

\section{Notes from 08.29}

\begin{enumerate}
  \item Try to ``fix'' CP by changing $R$ into $R^r$
  \item Finish formulating the ``compactness property".  Two candidates:
  \begin{itemize}
    \item ``Every cocone for a given infinite sequence loops back to some point in the sequence"
    \item ``If an $R^*$-sequence has a cocone then it's constant after some point on.''
  \end{itemize}
  \item Add the definition of "recurrent element"
\end{enumerate}

\section{09.05}
\begin{enumerate}
  \item done: WN, UN, RP imply SN (classical)
  \item need: omega bounded and RP implies SN (classical)
  \item need: omega bounded and RP implies SN (constructive)
  \item do we need $s_0 \to^* s_c$ in the proof?
  \item is $\omega$-bounded implied by WN and the following confluence property:
  $a \to^* n \in NF$, and $a \to b$ then $b \to^* n $.
  \item Remark before 1.2? (Exercise 1.3.21)
  \item Make the first argument to "being a normal form" implicit?
\end{enumerate}

\newcommand{\RP}{\mathsf{RP}}
\newcommand{\NF}{\mathsf{NF}}
\newcommand{\UN}{\mathsf{UN}}
\newcommand{\UNto}{\mathsf{UN}{\to}}
\newcommand{\SN}{\mathsf{SN}}
\newcommand{\WN}{\mathsf{WN}}
\newcommand{\from}{\leftarrow}

\subsection*{Additional remarks about Theorem 1.2.3.}
\begin{itemize}
  \item It seems that part (i) of the theorem can be strengthened to only
  assume $\UNto(R)$ instead of $\UN(R)$:
  \[ \WN(R) \land \UNto(R) \to \omega{-}\text{bounded}(R) \tag{i} \]
  \item The analogue of part (ii) of the theorem is unprovable, namely
  \[ \omega{-}\text{bounded}(R) \land \RP(R) \to \SN(R) \tag{ii}\]
  For a countermodel, take the one-element loop $a \to a$.

  (It is both $\omega${-}bounded and satisfies RP.)

  Our hypothesis RP is indeed weaker than ``Inc'' from Terese.
  \item The goal \texttt{iii-lemma :  $WN(R) \to WCR(R) \to \omega{-}\text{bounded}(R)$}
  seems either very difficult or impossible.

  Yet, constructing the bound of a given $R$-increasing sequence is key to the proof of
  (our interpretation of) Theorem 1.2.3(iii), namely that
  \[ WN(R) \land WCR(R) \land RP(R) \to SN(R) \tag{iii} \]
  \item Here is a classical proof of this implication.

  Let $R \subseteq A \times A$, and suppose $R$ satisfies WN, WCR, and RP.

  Suppose $R$ is not SN.  Let $a \in A$ be not SN.  By WN, let $n \in \NF$ be
  such that $a \to^* n$.  By induction on the length of this reduction, the finite sequence
  of terms comprising it must contain a final term with the property that
  it is not SN.  (For $n$ is SN, being a normal form, while $a$ is not.)

  $(\star)$ Let this last non-SN term be denoted $b_0$.

  If each single-step $R$-reduct of $b_0$ is SN (so that $b_0 \to x$ implies $x\in \SN$),
  then $b_0$ would itself be SN --- which it is not, by how it was chosen.

  Thus there exists a $c_0$ with $b_0 \to c_0$, and $c_0 \notin \SN$.

  So we have $c_0 \from b_0 \to m_0$ for some $m_0 \in \SN$. ($m_0$ is the next term after $b_0$ in the reduction $a \to^* n$.)

  By WCR, there exists another element $d_0 \in A$ with $c_0 \to^* d_0 \from^* m_0$.

  Since $m_0 \in \SN$ and this set of terms is closed under reduction, $d_0 \in \SN$ as well.

  Thus $b_0 \to c_0 \to^* d_0$, with $d_0 \in \SN$, and $c_0 \notin \SN$.

  Again, the reduction $c_0 \to^* d_0$ contains a last term that is not in SN.

  Let this term be denoted by $b_1$, and let the next term in the reduction sequence
  to $d_0$ be denoted $m_1$.

  Now repeat the above process starting at $(\star)$, incrementing all subscripts by 1.

  This generates an infinite reduction sequence

  \[b_0 \to c_0 \to^* b_1 \to c_1 \to^* b_2 \to \cdots \]

  Note that infinitely many terms in this sequence are one reduction step
  away from a term in $\SN$.

  Moreover, notice that the normal forms of $m_0$, $d_0$, and $m_1$ are the same
  and equal to $n$, whence the same is true for $m_1$, $d_1$, and $m_2$, etc.

  It follows that, for infinitely many terms in the sequence
  (namely, all the terms $b_i$), we have $b_i \to^* n$.

  Thus, all terms in the sequence reduce to $n$ and so $n$ is an $\omega$-bound
  of the sequence.

  By RP, some term $r$ in the sequence is recurrent.

  Since $r \to^* n$ and $r$ is recurrent, also $n \to^* r$.

  But $n$ is a normal form.  So this sequence is empty and $r=n$.

  But $r$ is a term in an infinite reduction sequence, and reduces to its successor.

  This yields a contradiction.
\end{itemize}
\end{document}
